CFLAGS += -Wall -Wextra -c -fPIC -fno-strict-aliasing
LFLAGS += -shared
SUFFIX = so

ifneq (@(OS),osx)
LFLAGS += -Wl,-soname,
else
LFLAGS += -Wl,-install_name,
endif

ifeq (@(OS),win32)
LINK += -lws2_32
SUFFIX = dll
endif


!COMPILE = |> gcc $(CFLAGS) %f -o %o |> %B.o
!LINK = |> gcc $(LFLAGS)%o %f -o %o $(LINK) |> $(BINARY).$(SUFFIX)